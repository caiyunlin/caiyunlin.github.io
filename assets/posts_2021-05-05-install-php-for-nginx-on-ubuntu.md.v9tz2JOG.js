import{_ as i,c as a,o as n,ai as p}from"./chunks/framework.CtWg-Y9G.js";const g=JSON.parse('{"title":"在 Ubuntu 上安装 Nginx 并支持 PHP","description":"","frontmatter":{"title":"在 Ubuntu 上安装 Nginx 并支持 PHP","date":"2021-05-05 13:45:00 +0800","categories":["技术"],"tags":["bash","ubuntu","nginx"],"urlname":"install-php-for-nginx-on-ubuntu","url":"https://www.caiyunlin.com/posts/install-php-for-nginx-on-ubuntu/"},"headers":[],"relativePath":"posts/2021-05-05-install-php-for-nginx-on-ubuntu.md","filePath":"posts/2021-05-05-install-php-for-nginx-on-ubuntu.md"}'),e={name:"posts/2021-05-05-install-php-for-nginx-on-ubuntu.md"};function t(h,s,l,k,d,r){return n(),a("div",null,s[0]||(s[0]=[p(`<blockquote><p>最近整理了一下博客系统，迁移到了Jekyll模板，发现Apache2服务器不支持中文路径，研究了一番没有找到解决方法，测试了nginx可以默认支持中文路径，遂整理一下，把 Apache2 换成了 Nginx</p></blockquote><p>本文所述的步骤在 Ubuntu 18.04 上测试通过。</p><h2 id="安装-nginx" tabindex="-1">安装 Nginx <a class="header-anchor" href="#安装-nginx" aria-label="Permalink to &quot;安装 Nginx&quot;">​</a></h2><p>使用 apt-get 安装 nginx</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 更新 APT 源</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> apt-get</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> update</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 安装 nginx</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> apt-get</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> install</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> nginx</span></span></code></pre></div><p>安装完成后测试一下 nginx 的版本，查看是否安装成功</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">nginx</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -v</span></span></code></pre></div><p>启动 nginx</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">service</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> nginx</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> start</span></span></code></pre></div><p>服务自动后，输入服务器所在的IP地址，应该可以看到nginx的欢迎界面 &quot;Welcome to nginx!&quot;</p><h2 id="安装-php" tabindex="-1">安装 PHP <a class="header-anchor" href="#安装-php" aria-label="Permalink to &quot;安装 PHP&quot;">​</a></h2><p>不像 Apache2, Nginx 没有包含自带的PHP处理引擎。 所以需要安装一个 PHP-FPM (FastCGI Porcess Manager) 来支持 PHP 的执行。 FPM 是一个 PHP FastCGI 的实现，可以非常好的支持大并发的php站点。</p><p>第一步你需要添加 Ubuntu 的 universe repository ，这样保证可以获取到最新的 php-fpm 包</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> add-apt-repository</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> universe</span></span></code></pre></div><p>接下来更新软件包，然后安装 php-fpm, 后续还会安装 php-mysql ， 这样 php 可以访问 MySQL 数据库，输入命令后按 Y 和回车继续。</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> apt</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> update</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> &amp;&amp;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> apt</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> install</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> php-fpm</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 如果需要使用 MYSQL，执行下面脚本安装 php-mysql</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> apt</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> install</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> php-mysql</span></span></code></pre></div><p>安装完成之后，检查 php 的版本</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">php</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --version</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 如果安装成功，应该可以看到下面类似的消息</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">PHP</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 7.2.24-0ubuntu0.18.04.7</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (cli) (</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">built:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Oct</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  7</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2020</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 15:24:25</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">) ( </span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">NTS</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> )</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Copyright</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (c) 1997-2018 The PHP Group</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Zend</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Engine</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> v3.2.0,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Copyright</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (c) 1998-2018 Zend Technologies</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    with</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Zend</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> OPcache</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> v7.2.24-0ubuntu0.18.04.7,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Copyright</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (c) 1999-2018, by Zend Technologies</span></span></code></pre></div><p>上面列出的 PHP 版本是 7.2, 这个版本可以根据你的 repository 的包有略微不同。 根据你安装的 Nginx 和 PHP 版本，你需要手动配置一下 PHP Socket 的路径，这样 Nginx 可以连接上它。</p><p>下面列出 /var/run/php 的内容</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">ls</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /var/run/php</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">php7.2-fpm.pid</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  php7.2-fpm.sock</span></span></code></pre></div><p>这里我们可以看到 php7.2-fpm.sock 接下来会用到它。</p><h2 id="配置-nginx-的多站点" tabindex="-1">配置 Nginx 的多站点 <a class="header-anchor" href="#配置-nginx-的多站点" aria-label="Permalink to &quot;配置 Nginx 的多站点&quot;">​</a></h2><p>如果你希望 Nginx 支持多个站点，可以 复制 <code>/etc/nginx/sites-available/default</code> ，如 example.com</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">cd</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /etc/nginx/sites-available</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">cp</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> default</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> example.com.conf</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">cp</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> default</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> example2.com.conf</span></span></code></pre></div><p>打开对应的 example.com.conf 文件，修改其中的 server_name 和 root 指定到对应的目录，如下 注意删掉 listen 后面的 default_server 因为默认只能有一个 default_server, 在 default 文件中已经定义了</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  listen</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 80</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  listen</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [::]:80 </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # .....</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  root</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /var/www/example.com</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # Add index.php to the list if you are using PHP</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  index</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> index.html</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> index.htm</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> index.nginx-debian.html</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  server_name</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> example.com</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  location</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">          # First attempt to serve request as file, then</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">          # as directory, then fall back to displaying a 404.</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">          try_files</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> $uri</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> $uri</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> =</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">404</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">  }</span></span></code></pre></div><p>修改完成后，激活该站点</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">cd</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /etc/nginx/sites-enabled</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ln</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -s</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /etc/nginx/sites-available/example.com.conf</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> example.com.conf</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ln</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -s</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /etc/nginx/sites-available/example2.com.conf</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> example2.com.conf</span></span></code></pre></div><h2 id="配置-nginx-的-php-扩展" tabindex="-1">配置 Nginx 的 PHP 扩展 <a class="header-anchor" href="#配置-nginx-的-php-扩展" aria-label="Permalink to &quot;配置 Nginx 的 PHP 扩展&quot;">​</a></h2><p>我们现在配置一下 Nginx 的 server 定义，默认 server 定义的路径在 <code>/etc/nginx/sites-available/default</code> 当然根据的你安装定义，路径可能在其他自定义的地方。 如果你的 Nginx 是支持多个域名的，你的配置文件可能是 <code>/etc/nginx/sites-available/example.com</code></p><p>使用 nano 工具，编辑文件</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> nano</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /etc/nginx/sites-available/default</span></span></code></pre></div><p>添加默认文件，支持 index.php</p><p>在 nano 里面，按下 ctrl+w 搜索 index.html，如下所示，在 index.html 前面或者后面，添加 index.php</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">index</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> index.php</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> index.html</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> index.htm</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> index.nginx-debian.html</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span></code></pre></div><p>配置 Server Name，如果需要，将你的自定义域名写到 server_name 后面</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">server_name</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> YOUR_DOMAIN_OR_IP_HERE</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span></code></pre></div><p>配置 PHP Socket 按下 CTRL + W 搜索 location ~ .php 那一行 你可以去掉注释符号 <code>#</code>, 注意 fastcgi_pass 指向到我们上一步查到 php7.2-fpm.sock 的路径</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">location</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ~</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> \\.</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">php</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">$ </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">{</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                include</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> snippets/fastcgi-php.conf</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">        #</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">        #       # With php-fpm (or other unix sockets):</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                fastcgi_pass</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> unix:/var/run/php/php7.2-fpm.sock</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">        #       # With php-cgi (or other tcp sockets):</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">        #       fastcgi_pass 127.0.0.1:9000;</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">        }</span></span></code></pre></div><p>这里注意，如果是php需要支持pathinfo的，则去掉后面的 $ ，如 <code>location ~ .php</code>，在 snippets/fastcgi-php.conf 中，对 PATH_INFO 做了处理，不需要再引入其他代码。</p><p>注意不要忘掉删掉花括号 } 前面的 # 注释符</p><h2 id="保存和测试-nginx-配置" tabindex="-1">保存和测试 Nginx 配置 <a class="header-anchor" href="#保存和测试-nginx-配置" aria-label="Permalink to &quot;保存和测试 Nginx 配置&quot;">​</a></h2><p>所有修改完毕之后，按下 Ctrl + X ，然后输入 y 和 回车保存内容。 执行下面的语句，保证配置修改正确了</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> nginx</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -t</span></span></code></pre></div><p>输入应该如下：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">nginx:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> the</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> configuration</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> file</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /etc/nginx/nginx.conf</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> syntax</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> is</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ok</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">nginx:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> configuration</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> file</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /etc/nginx/nginx.conf</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> test</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> is</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> successful</span></span></code></pre></div><p>如果没有问题，执行下面语句重启 nginx</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> service</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> nginx</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> reload</span></span></code></pre></div><h2 id="测试-php" tabindex="-1">测试 PHP <a class="header-anchor" href="#测试-php" aria-label="Permalink to &quot;测试 PHP&quot;">​</a></h2><p>要想知道 PHP 是否正常工作，在 nginx web 根目录创建一个 PHP 文件，如 info.php, 默认的web目录应该是 <code>/var/www/html</code>, 如果你的服务器配置了多站点，路径可能是 <code>/var/www/example.com/html</code> ， 知道的 web 根目录，后使用 nano 创建 info.php 文件</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> nano</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /var/www/html/info.php</span></span></code></pre></div><p>输入以下内容</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;?</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">php</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">phpinfo</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span></span></code></pre></div><p>按下 Ctrl + X ，然后输入 y 和 回车保存内容。</p><p>访问你的服务器地址或者域名，如 <a href="https://example.com/info.php" target="_blank" rel="noreferrer">https://example.com/info.php</a> 如果看到正常的 php 输出，则表示PHP配置安装成功了。</p><h2 id="安装-phpmyadmin" tabindex="-1">安装 phpmyadmin <a class="header-anchor" href="#安装-phpmyadmin" aria-label="Permalink to &quot;安装 phpmyadmin&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> apt</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> install</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> phpmyadmin</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 链接本地 phpmyadmin 到 phpmyadmin 的 安装目录</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ln</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -s</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> phpmyadmin</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /usr/share/phpmyadmin</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 如果 nginx 访问 phpmyadmin 的图片等静态资源有 Access Denied 的问题，也可以直接拷贝文件夹到 web 当前目录下</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">cp</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /usr/share/phpmyadmin</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> phpmyadmin</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -r</span></span></code></pre></div><p>【全文完】</p>`,59)]))}const o=i(e,[["render",t]]);export{g as __pageData,o as default};
